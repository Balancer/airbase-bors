{if $show_form}
<h2>Выставление штрафа</h2>
<p>За {$object->class_title_rp()|lower} «{$object->titled_url()}»</p>
{form class="airbase_user_admin_warning"}
<table>
<tr><td>Причина штрафа:</td><td>{bors_radio name="type_id" list="airbase_user_warning_type" class="w100p"}</td></tr>
<tr><td>Комментарий:<br /><small>Не обязательно</small></td><td>{textarea name="source" cols="50" rows="5" class="w100p"}</td></tr>
<tr><td>&nbsp;</td><td>{submit value="Выставить штраф"}</td></tr>
</table>
<input type="hidden" name="object" value="{$object->internal_uri()}" />
<input type="hidden" name="user_id" value="{$this->id()}" />
{/form}
{/if}

{$this->pages_links_nul()}

{if $active_warnings}
<h2>Активные штрафы</h2>
<table class="btab w100p">
<tr><th>Дата</th><th>Вес, типа</th><th>От кого</th><th>Комментарий</th></tr>
{foreach from=$active_warnings item="w"}
<tr>
	<td style="color: {if $w->score()>0}red{else}green{/if}; font-size: 8pt;">{$w->create_time()|full_time}</td>
	<td style="color: {if $w->score()>0}red{else}green{/if}; font-size: 8pt;">{$w->score()}, {$w->type_id()|bors_list_item_name:"airbase_user_warning_type"}</td>
	<td>{$w->moderator_name()}</td>
	<td>{$w->source()|pun_lcml}<br /><small>// За: {$w->referer_titled_url()}</small></td>
</tr>
{/foreach}
</table>
{/if}

{if $passive_warnings}
<h2>Истёкшие штрафы</h2>
<table class="btab w100p">
<tr><th>Дата</th><th>Вес, типа</th><th>От кого</th><th>Комментарий</th></tr>
{foreach from=$passive_warnings item="w"}
<tr>
	<td style="color: {if $w->score()>0}red{else}green{/if}; font-size: 8pt;">{$w->create_time()|full_time}</td>
	<td style="color: {if $w->score()>0}red{else}green{/if}; font-size: 8pt;">{$w->score()}, {$w->type_id()|bors_list_item_name:"airbase_user_warning_type"}</td>
	<td>{$w->moderator_name()}</td>
	<td>{$w->source()|pun_lcml}<br /><small>// За: {$w->referer_titled_url()}</small></td>
</tr>
{/foreach}
</table>
{/if}

{$this->pages_links_nul()}
